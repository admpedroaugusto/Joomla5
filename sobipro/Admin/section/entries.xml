<?xml version="1.0" encoding="utf-8"?><!--
 @package: SobiPro multi-directory component with content construction support

 @author
 Name: Sigrid Suski & Radek Suski, Sigsiu.NET GmbH
 Email: sobi[at]sigsiu.net
 Url: https://www.Sigsiu.NET

 @copyright Copyright (C) 2006 - 2023 Sigsiu.NET GmbH (https://www.sigsiu.net). All rights reserved.
 @license GNU/GPL Version 3
 This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License version 3
 as published by the Free Software Foundation, and under the additional terms according section 7 of GPL v3.
 See https://www.gnu.org/licenses/gpl.html and https://www.sigsiu.net/licenses.

 This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

 @created 30 August 2012 by Radek Suski
 @modified 11 December 2023 by Sigrid Suski
-->

<definition>
	<header>
		<file type="script" filename="adm.rejection"/>
	</header>

	<toolbar title="ENTRIES_SITE_TITLE" subtitle="var:[section]" class="section entries">
		<buttons type="entry" condition="acl.entry.visible">
			<button type="url" sid="true" task="entry.add" label="TB.ADD_NEW" condition="acl.entry.add" colour="new" icon="plus"/>
			<button type="delete" task="entry.delete" confirm="TB.JS_DELETE_ENTRIES_WARN" condition="acl.entry.delete" colour="delete"/>
			<button task="entry.deleteAll" confirm="TB.JS_DELETE_ALL_ENTRIES_WARN" label="TB.DELETE_ALL" icon="eraser" condition="acl.entry.delete" colour="delete"/>
			<dropdown-header label="TB.PUBLISHING"/>
			<button type="publish" task="entry.publish" condition="acl.entry.publish"/>
			<button type="hide" task="entry.hide" condition="acl.entry.publish"/>
			<dropdown-header label="TB.APPROVAL"/>
			<button type="approve" task="entry.approve" condition="acl.entry.approve"/>
			<button type="revoke" task="entry.unapprove" condition="acl.entry.approve"/>
		</buttons>
		<buttons type="sections" buttons="sections-list"/>
		<buttons type="options">
			<button type="url" task="panel"/>
			<button type="url" task="config" condition="acl.config"/>
			<button type="url" task="acl" condition="acl.admin"/>
			<button type="url" task="extensions.installed" condition="acl.apps"/>
			<button type="url" task="template.info" condition="acl.config"/>
			<button type="url" task="error" condition="acl.admin"/>
			<button type="help" target="_blank"/>
		</buttons>
	</toolbar>

	<body>
		<div class="row">
			<div class="col-lg-3" id="spctrl-menu">
				<menu/>
			</div>
			<div class="col-lg-9 sp-main-area">
				<header label="SECTION_ALL_ENTRIES_TITLE" invert-condition="showhint" icon="file-alt">
					<div class="input-group-sm d-flex gap-1">
						<field type="text" name="sp_entries_filter" value="filter" aria-label="ACCESSIBILITY.LIST_FILTER" placeholder="FILTER"
						       data-spctrl="submit"/>   <!--id="spEntriesFilter"-->
						<field type="select" name="eorder" selected="ordering" values="entriesOrdering" aria-label="ACCESSIBILITY.LIST_SELECT_ORDER_ENTRIES" data-spctrl="submit"/>
						<field type="select" name="elimit" selected="entries-limit" aria-label="ACCESSIBILITY.LIST_NUMBER_ENTRIES" data-spctrl="submit">
							<values>
								<values label="LISTING_LIMIT"/>
								<option value="5"/>
								<option value="15"/>
								<option value="25"/>
								<option value="50"/>
								<option value="100"/>
							</values>
						</field>
						<field type="button" name="save-ordering" icon="save" aria-label="ACCESSIBILITY.LIST_SAVE_ENTRIES" class="btn btn-sm btn-info spctrl-default-ordering"
						       data-target="entries"/>
					</div>
				</header>
				<message id="spctrl-message"/>
				<div class="dk-progress mb-2 hidden" id="spctrl-progress">
					<message type="info" class="alert-sm"/>
					<div class="progress" id="spctrl-progress">
						<div class="progress-bar bg-info progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"/>
					</div>
				</div>

				<message type="outline-info" condition="filter" class="message" label="FILTER_SET"/>
				<div class="table-responsive" condition="entries">
					<table>
						<head>
							<cell type="text" label="HEADER_ID" class="dk-cell text-center"/>
							<cell type="checkbox" rel="e_sid" class="dk-cell text-center" aria-label="ACCESSIBILITY.ENTRY_CHECK_ALL"/>
							<cell type="text" label="HEADER_ENTRIES_NAME" class="dk-cell text-start"/>
							<cells type="text" value="customHeader" class="dk-cell text-center"/>
							<cell type="text" label="HEADER_ENTRIES_STATE" class="dk-cell text-center"/>
							<cell type="text" label="HEADER_ENTRIES_APPROVAL" class="dk-cell text-center"/>
							<cell type="text" label="HEADER_MODIFIEDDATE" class="dk-cell text-center"/>
							<cell type="text" label="HEADER_FIELD_AUTHOR" class="dk-cell text-center"/>
							<cell type="text" label="HEADER_ENTRIES_REJECT" condition="acl.entry.approve" class="dk-cell text-center"/>
						</head>
						<loop subject="entries">
							<cell type="text" value="id" class="dk-cell text-center"/>
							<cell type="checkbox" name="e_sid" value="id" aria-label="ACCESSIBILITY.ENTRY_CHECK" checked-out-time="coutTime"
							      checked-out-by="cout" class="dk-cell text-center"/>
							<cell class="dk-cell text-start">
								<cell type="link" value="name" class="var:[valid] entry-name" aria-label="ACCESSIBILITY.ENTRY_EDIT">
									<url type="intern">
										<param name="task" value="entry.edit"/>
										<param name="sid" value="id" parse="true"/>
										<param name="pid" value="request.pid" parse="true" subject="skip"/>
									</url>
								</cell>
							</cell>
							<cells value="customFields" class="dk-cell text-center"/>
							<cell type="ticker" value="state" class="dk-cell text-center" icons="{'0':'times-circle','1':'check-circle'}" fa="far"
							      colors="{'0':'dk-text-red','1':'dk-text-green'}"
							      aria-labels="{'0':'ACCESSIBILITY.TICKER_ENTRY_ENABLE','1':'ACCESSIBILITY.TICKER_ENTRY_DISABLE'}"
							      valid-since="validSince" valid-until="validUntil">
								<url type="intern" class="dk-enabled" link-condition="/acl.entry.publish">
									<param name="task" value="entry.toggle.enabled"/>
									<param name="sid" value="id" parse="true"/>
								</url>
							</cell>
							<cell type="ticker" value="approved" class="dk-cell text-center" icons="{'0':'thumbs-down','1':'thumbs-up'}"
							      colors="{'0':'dk-text-red','1':'dk-text-azure'}"
							      aria-labels="{'0':'ACCESSIBILITY.TICKER_ENTRY_GRANT','1':'ACCESSIBILITY.TICKER_ENTRY_REVOKE'}">
								<url type="intern" class="dk-approved" link-condition="/acl.entry.approve">
									<param name="task" value="entry.toggle.approval"/>
									<param name="sid" value="id" parse="true"/>
								</url>
							</cell>
							<cell type="text" value="updatedTime" dateFormat="cfg:list_format" class="dk-cell text-center"/>
							<cell type="text" value="owner" class="dk-cell text-center text-nowrap" aria-label="ACCESSIBILITY.USER_EDIT"/>
							<cell condition="/acl.entry.approve" type="ticker" value="state" class="dk-cell text-center" icons="{'0':'undo','1':'undo'}"
							      colors="{'0':'dk-text-dark','1':'dk-text-dark'}"
							      aria-labels="{'0':'ACCESSIBILITY.TICKER_ENTRY_REJECT','1':'ACCESSIBILITY.TICKER_ENTRY_REJECT'}">
								<url type="intern" class="spctrl-entry-reject dk-reject">
									<param name="task" value="entry.edit"/>
									<param name="sid" value="id" parse="true"/>
								</url>
							</cell>
						</loop>
					</table>
				</div>
				<div condition="showhint">
					<hint label="ENTRY.NO_ENTRIES" icon="file-alt" description="ENTRY.EXPL" help="section.entries"
					      btn1="{'task':'entry.add','param':'section','caption':'ENTRY.ADDNEW'}"/>
				</div>

				<pagination set="eSite" class="justify-content-center" inputbox="right" type="icon">
					<param name="count" value="entries-count" parse="true"/>
					<param name="limit" value="entries-limit" parse="true"/>
					<param name="current" value="entries-site" parse="true"/>
					<param name="url">
						<param name="option" value="com_sobipro"/>
						<param name="task" value="section.entries"/>
						<param name="pid" value="request.pid" parse="true"/>
						<param name="eSite" value=""/>
					</param>
				</pagination>
			</div>
		</div>

		<!-- Rejection modal window -->
		<div class="SobiPro modal fade" id="spctrl-reject-entry-window" tabindex="-1" aria-labelledby="sparia-title">
			<div class="modal-dialog modal-lg modal-fullscreen-sm-down ">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title" id="sparia-title">
							<text value="ENTRY_REJECT"/>
						</h3>
						<button class="btn-close" data-bs-dismiss="modal" aria-label="ACCESSIBILITY.CLOSE"/>
					</div>
					<div class="modal-body">
						<div class="container-fluid">
							<fieldset>
								<field type="select" name="template" label="ENTRY_REJECT_TPLS" width="5" class="me-1"/>
								<field type="button" class="btn btn-error spctrl-remove-tpl hidden" icon="trash" aria-label="ACCESSIBILITY.REJECTION_TEMPLATE_DELETE"/>
								<field type="textarea" name="reason" label="ENTRY_REJECT_REASON" editor="false" width="8" rows="10" style=""/>
								<field type="toggle" name="trigger.unpublish" value="1" label="ENTRY_REJECT_TRIGGER_UNPUBLISH" prefix="yes_no"/>
								<field type="toggle" name="trigger.unapprove" label="ENTRY_REJECT_TRIGGER_UNAPPROVE" prefix="yes_no"/>
								<field type="toggle" name="unpublish" value="0" label="ENTRY_REJECT_UNPUBLISH" prefix="yes_no"/>
								<field type="toggle" name="discard" value="0" label="ENTRY_REJECT_DISCARD" prefix="yes_no"/>
								<field type="token"/>
							</fieldset>
							<div class="spctrl-spinner dk-spinner hidden">
								<div class="fas fa-spinner fa-spin fa-lg" aria-hidden="true"/>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<a href="#" class="btn btn-success spctrl-save-tpl" role="button">
							<text value="ENTRY_REJECT_SAVE_TPL"/>
						</a>
						<a href="#" class="btn btn-secondary" data-bs-dismiss="modal" role="button">
							<text value="CLOSE"/>
						</a>
						<a href="#" class="btn btn-primary spctrl-reject" role="button">
							<text value="ENTRY_REJECT"/>
						</a>
					</div>
				</div>
			</div>
		</div>
	</body>

	<config>
		<action value="index.php"/>
		<hidden>
			<field name="option" default="com_sobipro"/>
			<field name="task" default="section.entries"/>
		</hidden>
	</config>
</definition>
