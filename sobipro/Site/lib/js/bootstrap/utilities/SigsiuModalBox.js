const SigsiuModalBox={templates:{popup:'<div class="toast-header">  <span class="fas {%icon-type%} fa-lg fa-fw" aria-hidden="true" style="color: {%icon-colour%}"></span>&nbsp;    <strong class="me-auto">{%title%}</strong>    <small data-spctrl="elapsed-time" data-created="{%time%}"></small>    <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close">    </button></div><div class="toast-body">{%body%}</div>',alert:{5:'<div class="modal sp-sigsiu-modal" id="sp-modal-window" tabindex="-1">  <div class="modal-dialog">    <div class="modal-content">      <div class="modal-header" id="sp-modal-header">        <h5 class="modal-title {%alert-colour%}">{%icon-type%} {%title%}</h5>        <button type="button" class="btn-close" data-spctrl="close-modal" data-bs-dismiss="modal" aria-label="{%close%}"></button>      </div>      <div class="modal-body">{%body%}</div>      <div class="modal-footer">        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{%close%}</button>      </div>    </div>  </div></div>',4:'<div class="modal sp-sigsiu-modal" id="sp-modal-window" tabindex="-1">  <div class="modal-dialog">    <div class="modal-content">      <div class="modal-header" id="sp-modal-header">        <h5 class="modal-title {%alert-colour%}">{%icon-type%} {%title%}</h5>        <button type="button" class="close" data-spctrl="close-modal" data-dismiss="modal" aria-label="{%close%}"><span aria-hidden="true">×</span></button>      </div>      <div class="modal-body">{%body%}</div>      <div class="modal-footer">        <button type="button" class="btn btn-secondary" data-dismiss="modal">{%close%}</button>      </div>    </div>  </div></div>',3:'<div class="modal sp-sigsiu-modal" id="sp-modal-window" tabindex="-1" role="dialog">  <div class="modal-dialog" role="document">    <div class="modal-content">      <div class="modal-header" id="sp-modal-header">        <h5 class="modal-title {%alert-colour%}">{%icon-type%} {%title%}</h5>        <button type="button" class="close" data-spctrl="close-modal" data-dismiss="modal" aria-label="{%close%}"><span aria-hidden="true">×</span></button>      </div>      <div class="modal-body">{%body%}</div>      <div class="modal-footer">        <button type="button" class="btn btn-default" data-dismiss="modal">{%close%}</button>      </div>    </div>  </div></div>',2:'<div class="modal sp-sigsiu-modal" id="sp-modal-window" tabindex="-1" role="dialog">   <div class="modal-header" id="sp-modal-header">     <h3 class="{%alert-colour%}">{%icon-type%} {%title%}</h3>     <button type="button" class="close" data-spctrl="close-modal" data-dismiss="modal" aria-label="{%close%}" aria-hidden="true">×</button>   </div>   <div class="modal-body">{%body%}</div>   <div class="modal-footer">     <a href="#" data-dismiss="modal" class="btn">{%close%}</a>   </div></div>'},confirm:'<div class="toast-container position-absolute p-3 top-50 start-50 translate-middle" style="z-index: 7000" data-original-class="toast-container position-absolute p-3">  <div class="toast align-items-center bg-light border-0 show" role="alert" aria-live="assertive" aria-atomic="true">    <div class="d-flex toast-body">      <div class="toast-body">{%body%}</div>      <div class="mt-2 pt-2 border-top">         <button type="button" data-spctrl="prompt-confirm" class="btn btn-primary btn-sm" data-bs-dismiss="toast">Continue</button>         <button type="button" data-spctrl="prompt-cancel"  class="btn btn-secondary btn-sm" data-bs-dismiss="toast">Cancel</button>       </div>    </div>  </div></div>',prompt:'<div class="toast-container position-absolute p-3 top-50 start-50 translate-middle" style="z-index: 7000" data-original-class="toast-container position-absolute p-3">  <div class="toast align-items-center bg-light border-0 show" role="alert" aria-live="assertive" aria-atomic="true">    <div class="d-flex toast-body">      <div class="toast-body">{%body%} <input type="text"/> </div>      <div class="mt-2 pt-2 border-top">         <button type="button" data-spctrl="prompt-confirm" class="btn btn-primary btn-sm" data-bs-dismiss="toast">Continue</button>         <button type="button" data-spctrl="prompt-cancel"  class="btn btn-secondary btn-sm" data-bs-dismiss="toast">Cancel</button>       </div>    </div>  </div></div>'},Confirm:t=>{let e=SobiCore.ExtendElement(document.createElement("div"));e.innerHTML=SigsiuBox.templates.confirm.replace("{%body%}",t);const a=SobiCore.El("main");return a.prepend(e),new bootstrap.Toast(e,{autohide:!1}).show(),new Promise(t=>{e.El("prompt-confirm").onClick(()=>{t()})})},Prompt:(t,e)=>{let a=SobiCore.ExtendElement(document.createElement("div"));a.innerHTML=SigsiuBox.templates.prompt.replace("{%body%}",t);const o=SobiCore.El("main");return o.prepend(a),new bootstrap.Toast(a,{autohide:!1}).show(),new Promise(t=>{a.find("input")[0].val(e),a.find("input")[0].focus(),a.El("prompt-confirm").onClick(()=>{t(a.find("input")[0].val())})})},Alert:(l,d,n="info")=>{const r=document.getElementById("SobiPro");if(r){let t,e;switch(n){case"error":t=SobiPro.Ico("exclamation-triangle"),e="text-danger text-error";break;case"warning":t=SobiPro.Ico("exclamation-triangle"),e="text-warning";break;case"success":t=SobiPro.Ico("ok-circle"),e="text-success";break;default:t=SobiPro.Ico("exclamation-circle"),e="text-info"}n=SobiPro.Txt("CLOSE");let a=SigsiuModalBox.templates.alert[bs].replace("{%body%}",l);a=a.replace("{%title%}",d).replaceAll("{%close%}",n).replace("{%icon-type%}",t).replace("{%alert-colour%}",e);let o=document.getElementById("sp-sigsiu-modal-box");o&&o.remove(),o=document.createElement("div"),o.setAttribute("id","sp-sigsiu-modal-box"),o.innerHTML=a,r.appendChild(o);let s=document.getElementById("sp-modal-header");void 0===d&&s&&s.remove();let i;5===bs?(i=new bootstrap.Modal(document.getElementById("sp-modal-window")),i.show()):(i=SobiPro.jQuery("#sp-modal-window"),i.modal(),2===bs&&i.show())}},elapsed:a=>{a.html(SobiCore._("timer_just_now"));setInterval(()=>{var t=a.getData("created"),t=Date.now()-1e3*t;let e="";e=t<12e4?SobiCore._("timer_seconds_ago").replace("{%seconds%}",Math.round(t/1e3)):t<36e5?SobiCore._("timer_minutes_ago").replace("{%minutes%}",Math.round(t/6e4)):SobiCore._("timer_long_time_ago"),a.html(e)},1e4)},Notify:(t,e,a="info",o=!1)=>{let s=SobiCore.ExtendElements([document.createElement("div")])[0];s.addClass("toast"),s.setAttribute("role","alert"),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true");let i=SigsiuBox.templates.popup.replace("{%title%}",t).replace("{%body%}",e).replace("{%time%}",Math.floor(Date.now()/1e3));switch(a){case"info":i=i.replace("{%icon-type%}","fa-info-circle").replace("{%icon-colour%}","blue");break;case"error":i=i.replace("{%icon-type%}","fa-exclamation-triangle").replace("{%icon-colour%}","red");break;case"warning":i=i.replace("{%icon-type%}","fa-exclamation-triangle").replace("{%icon-colour%}","orange");break;case"success":i=i.replace("{%icon-type%}","fa-check-circle").replace("{%icon-colour%}","green")}s.innerHTML=i,SigsiuBox.elapsed(s.El("elapsed-time"));const l=SobiCore.El("notifications");l.append(s),new bootstrap.Toast(s,{autohide:o,delay:500}).show()}};