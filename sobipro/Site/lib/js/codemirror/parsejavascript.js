var JSParser=Editor.Parser=function(){var n={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},t=!1;function e(n,t,e,i,r,o){this.indented=n,this.column=t,this.type=e,null!=i&&(this.align=i),this.prev=r,this.info=o}return{make:function(i,r){var o,a,c=tokenizeJavaScript(i),u=[t?function(n){return y(S,P)}:P],f=null,l=new e((r||0)-indentUnit,0,"block",!1),s=0,v=0,p={next:function(){for(;u[u.length-1].lex;)u.pop()();var n=c.next();"whitespace"==n.type&&0==s&&(v=n.value.length);s+=n.value.length,"\n"==n.content&&(v=s=0,"align"in l||(l.align=!1),n.indentation=function(n){return function(t){var e=t&&t.charAt(0),i=n.type,r=e==i;return"vardef"==i?n.indented+4:"form"==i&&"{"==e?n.indented:"stat"==i||"form"==i?n.indented+indentUnit:"switch"!=n.info||r?n.align?n.column-(r?1:0):n.indented+(r?0:indentUnit):n.indented+(/^(?:case|default)\b/.test(t)?indentUnit:2*indentUnit)}}(l));if("whitespace"==n.type||"comment"==n.type)return n;"align"in l||(l.align=!0);for(;;)if(o=a=!1,u.pop()(n.type,n.content),o)return a?n.style=a:"variable"==n.type&&k(n.content)&&(n.style="js-localvariable"),n},copy:function(){var n=f,t=l,e=u.concat([]),i=c.state;return function(r){return f=n,l=t,u=e.concat([]),s=v=0,c=tokenizeJavaScript(r,i),p}}};function d(n){for(var t=n.length-1;t>=0;t--)u.push(n[t])}function h(){d(arguments),o=!0}function y(){d(arguments),o=!1}function b(n){a=n}function m(){f={prev:f,vars:{this:!0,arguments:!0}}}function g(){f=f.prev}function w(n){f&&(b("js-variabledef"),f.vars[n]=!0)}function k(n){for(var t=f;t;){if(t.vars[n])return!0;t=t.prev}return!1}function j(n,t){var i=function(){l=new e(v,s,n,null,l,t)};return i.lex=!0,i}function x(){l=l.prev}function U(n){return function(t){t==n?h():h(arguments.callee)}}function P(n){return y(J,P)}function J(n){"var"==n?h(j("vardef"),B,U(";"),x):"keyword a"==n?h(j("form"),S,J,x):"keyword b"==n?h(j("form"),J,x):"{"==n?h(j("}"),q,x):"function"==n?h(K):"for"==n?h(j("form"),U("("),j(")"),F,U(")"),x,J,x):"variable"==n?h(j("stat"),O):"switch"==n?h(j("form"),S,j("}","switch"),U("{"),q,x,x):"case"==n?h(S,U(":")):"default"==n?h(U(":")):"catch"==n?h(j("form"),m,U("("),L,U(")"),J,x,g):y(j("stat"),S,U(";"),x)}function S(t){n.hasOwnProperty(t)?h(z):"function"==t?h(K):"keyword c"==t?h(S):"("==t?h(j(")"),S,U(")"),x,z):"operator"==t?h(S):"["==t?h(j("]"),E(S,"]"),x,z):"{"==t&&h(j("}"),E(C,"}"),x,z)}function z(n){"operator"==n?h(S):"("==n?h(j(")"),S,E(S,")"),x,z):"."==n?h(A,z):"["==n&&h(j("]"),S,U("]"),x,z)}function O(n){":"==n?h(x,J):y(z,U(";"),x)}function A(n){"variable"==n&&(b("js-property"),h())}function C(t){"variable"==t&&b("js-property"),n.hasOwnProperty(t)&&h(U(":"),S)}function E(n,t){function e(i){","==i?h(n,e):i==t?h():h(U(t))}return function(i){i==t?h():y(n,e)}}function q(n){"}"==n?h():y(J,q)}function B(n,t){"variable"==n?(w(t),h(D)):h()}function D(n,t){"="==t?h(S,D):","==n&&h(B)}function F(n){"var"==n?h(B,H):";"==n?y(H):"variable"==n?h(G):y(H)}function G(n,t){"in"==t?h(S):h(z,H)}function H(n,t){";"==n?h(I):"in"==t?h(S):h(S,U(";"),I)}function I(n){")"==n?y():h(S)}function K(n,t){"variable"==n?(w(t),h(K)):"("==n&&h(m,E(L,")"),J,g)}function L(n,t){"variable"==n&&(w(t),h())}return x.lex=!0,p},electricChars:"{}:",configure:function(n){null!=n.json&&(t=n.json)}}}();