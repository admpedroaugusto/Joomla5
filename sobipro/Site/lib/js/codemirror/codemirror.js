window.CodeMirror=function(){"use strict";function e(r,i){var a={},x=e.defaults;for(var b in x)x.hasOwnProperty(b)&&(a[b]=(i&&i.hasOwnProperty(b)?i:x)[b]);var T=ue("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");T.setAttribute("wrap","off"),T.setAttribute("autocorrect","off"),T.setAttribute("autocapitalize","off");var D=ue("div",[T],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),z=ue("div",null,"CodeMirror-scrollbar-inner"),H=ue("div",[z],"CodeMirror-scrollbar"),F=ue("div"),Y=ue("div",null,null,"position: relative; z-index: -1"),q=ue("pre"," ","CodeMirror-cursor"),te=ue("pre"," ","CodeMirror-cursor","visibility: hidden"),ne=ue("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),ie=ue("div",[ne,q,te,Y,F],null,"position: relative; z-index: 0"),he=ue("div",null,"CodeMirror-gutter-text"),ge=ue("div",[he],"CodeMirror-gutter"),Ce=ue("div",[ge,ue("div",[ie],"CodeMirror-lines")],null,"position: relative"),be=ue("div",[Ce],null,"position: relative"),Se=ue("div",[be],"CodeMirror-scroll");Se.setAttribute("tabIndex","-1");var ke=ue("div",[D,H,Se],"CodeMirror"+(a.lineWrapping?" CodeMirror-wrap":""));r.appendChild?r.appendChild(ke):r(ke),ln(),an(),t&&(T.style.width="0px"),y||(Se.draggable=!0),ie.style.outline="none",null!=a.tabindex&&(T.tabIndex=a.tabindex),a.autofocus&&Pt(),a.gutter||a.lineNumbers||(ge.style.display="none"),S&&(D.style.height="1px",D.style.position="absolute"),k?(H.style.zIndex=-2,H.style.visibility="hidden"):g&&(H.style.minWidth="18px");var we,Me,Te,Ae=new J,Le=new J,Ne=new I([new R([new O("")])]),Ee=0;rn();var We,De,ze,He,Oe,Re,Ie,Be,Pe,Ke,Ue,Fe,Ve={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Ge=0,Ye=!1,$e=!1,Xe=!1,je=0,Ze=0,_e=0,Je=0,qe=ft(0),Qe=!1,et=!0,tt=!1,nt=null;zn((function(){dt(a.value||""),Oe=!1}))();var rt=new U;_(Se,"mousedown",zn((function(e){Xt(Z(e,"shiftKey"));for(var t=X(e);t!=ke;t=t.parentNode)if(t.parentNode==be&&t!=Ce)return;for(t=X(e);t!=ke;t=t.parentNode)if(t.parentNode==he)return a.onGutterClick&&a.onGutterClick(ut,pe(he.childNodes,t)+Ze,e),G(e);var n=Sn(e);switch(j(e)){case 3:return void(d&&kn(e));case 2:return n&&Jt(n.line,n.ch,!0),setTimeout(Pt,20),void G(e)}if(!n)return void(X(e)==Se&&G(e));Te||yt();var r=+new Date,i="single";if(ze&&ze.time>r-400&&ae(ze.pos,n))i="triple",G(e),setTimeout(Pt,20),jt({line:l=n.line,ch:0},Qt({line:l+1,ch:0}));else if(De&&De.time>r-400&&ae(De.pos,n)){i="double",ze={time:r,pos:n},G(e);var o=tn(n);jt(o.from,o.to)}else De={time:r,pos:n};var l;function s(t){y&&(Se.draggable=!1),He=!1,c(),h(),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(G(t),Jt(n.line,n.ch,!0),Pt())}var u,f=n;if(a.dragDrop&&ee&&!a.readOnly&&!ae(Ve.from,Ve.to)&&!se(n,Ve.from)&&!se(Ve.to,n)&&"single"==i){y&&(Se.draggable=!0);var c=_(document,"mouseup",zn(s),!0),h=_(Se,"drop",zn(s),!0);return He=!0,void(Se.dragDrop&&Se.dragDrop())}G(e),"single"==i&&Jt(n.line,n.ch,!0);var g=Ve.from,m=Ve.to;function v(e){if("single"==i)jt(n,e);else if("double"==i){var t=tn(e);se(e,g)?jt(t.from,m):jt(g,t.to)}else"triple"==i&&(se(e,g)?jt(m,Qt({line:e.line,ch:0})):jt(g,Qt({line:e.line+1,ch:0})))}function x(e){var t=Sn(e,!0);if(t&&!ae(t,f)){Te||yt(),f=t,v(t),Oe=!1;var n=Vt();(t.line>=n.to||t.line<n.from)&&(u=setTimeout(zn((function(){x(e)})),150))}}function C(e){clearTimeout(u);var t=Sn(e);t&&v(t),G(e),Pt(),Oe=!0,b(),c()}var b=_(document,"mousemove",zn((function(e){clearTimeout(u),G(e),p||j(e)?x(e):C(e)})),!0);c=_(document,"mouseup",zn(C),!0)}))),_(Se,"dblclick",zn((function(e){for(var t=X(e);t!=ke;t=t.parentNode)if(t.parentNode==he)return G(e);G(e)}))),_(ie,"selectstart",G),d||_(Se,"contextmenu",kn),_(Se,"scroll",(function(e){a.fixedGutter&&ge.style.left!=Se.scrollLeft+"px"&&(ge.style.left=Se.scrollLeft+"px");Math.abs(Se.scrollTop-Ge)>1&&(Ge=Se.scrollTop,H.scrollTop!=Ge&&(H.scrollTop=Ge),Gt([]));a.onScroll&&a.onScroll(ut)})),_(H,"scroll",(function(e){Math.abs(H.scrollTop-Ge)>1&&(Ge=Se.scrollTop=H.scrollTop,Gt([]))})),_(H,"mousedown",(function(){Te&&setTimeout(Pt,0)}));var it,ot=_(window,"resize",(function(){ke.parentNode?Gt(!0):ot()}),!0);function lt(e){a.onDragEvent&&a.onDragEvent(ut,V(e))||$(e)}_(T,"keyup",zn((function(e){if(a.onKeyEvent&&a.onKeyEvent(ut,V(e)))return;16==Z(e,"keyCode")&&(We=null)}))),_(T,"input",Dt),_(T,"keydown",zn(vt)),_(T,"keypress",zn((function(e){tt&&It();if(a.onKeyEvent&&a.onKeyEvent(ut,V(e)))return;var t=Z(e,"keyCode"),n=Z(e,"charCode");if(C&&t==mt)return mt=null,void G(e);if((C&&(!e.which||e.which<10)||S)&&gt(e))return;var r=String.fromCharCode(null==n?t:n);a.electricChars&&Me.electricChars&&a.smartIndent&&!a.readOnly&&Me.electricChars.indexOf(r)>-1&&setTimeout(zn((function(){nn(Ve.to.line,"smart")})),75);if(function(e,t){var n=c("'"+t+"'",a.extraKeys,a.keyMap,(function(e){return pt(e,!0)}));n&&(G(e),wn());return n}(e,r))return;Dt()}))),_(T,"focus",yt),_(T,"blur",xt),a.dragDrop&&(_(Se,"dragstart",(function(e){var t=Et();e.dataTransfer.setData("Text",t),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(ue("img"),0,0)})),_(Se,"dragenter",lt),_(Se,"dragover",lt),_(Se,"drop",zn((function(e){if(a.onDragEvent&&a.onDragEvent(ut,V(e)))return;G(e);var t=Sn(e,!0),n=e.dataTransfer.files;if(!t||a.readOnly)return;if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,i=Array(r),o=0,l=function(e,n){var l=new FileReader;l.onload=function(){i[n]=l.result,++o==r&&(t=Qt(t),zn((function(){var e=Tt(i.join(""),t,t);jt(t,e)}))())},l.readAsText(e)},s=0;s<r;++s)l(n[s],s);else{if(He&&!se(t,Ve.from)&&!se(Ve.to,t))return;try{(i=e.dataTransfer.getData("Text"))&&Hn((function(){var e=Ve.from,n=Ve.to;jt(t,t),He&&Tt("",e,n),At(i),Pt()}))}catch(e){}}})))),_(Se,"paste",(function(){Pt(),Dt()})),_(T,"paste",(function(){Xe=!0,Dt()})),_(T,"cut",zn((function(){a.readOnly||At("")}))),S&&_(be,"mouseup",(function(){document.activeElement==T&&T.blur(),Pt()}));try{it=document.activeElement==T}catch(e){}function at(e){return e>=0&&e<Ne.size}it||a.autofocus?setTimeout(yt,20):xt();var st,ut=ke.CodeMirror={getValue:function(e){var t=[];return Ne.iter(0,Ne.size,(function(e){t.push(e.text)})),t.join(e||"\n")},setValue:zn(dt),getSelection:Et,replaceSelection:zn(At),focus:function(){window.focus(),Pt(),yt(),Dt()},setOption:function(e,t){var n,r=a[e];a[e]=t,"mode"==e||"indentUnit"==e?rn():"readOnly"==e&&"nocursor"==t?(xt(),T.blur()):"readOnly"!=e||t?"theme"==e?ln():"lineWrapping"==e&&r!=t?zn(on)():"tabSize"==e?Gt(!0):"keyMap"==e?an():"tabindex"==e&&(T.tabIndex=t):Bt(!0),"lineNumbers"!=e&&"gutter"!=e&&"firstLineNumber"!=e&&"theme"!=e&&"lineNumberFormatter"!=e||(n=a.gutter||a.lineNumbers,ge.style.display=n?"":"none",n?Ke=!0:F.parentNode.style.marginLeft=0,Gt(!0))},getOption:function(e){return a[e]},getMode:function(){return Me},undo:zn((function(){bt(rt.done,rt.undone)})),redo:zn((function(){bt(rt.undone,rt.done)})),indentLine:zn((function(e,t){"string"!=typeof t&&(t=null==t?a.smartIndent?"smart":"prev":t?"add":"subtract"),at(e)&&nn(e,t)})),indentSelection:zn((function(e){if(ae(Ve.from,Ve.to))return nn(Ve.from.line,e);for(var t=Ve.to.line-(Ve.to.ch?0:1),n=Ve.from.line;n<=t;++n)nn(n,e)})),historySize:function(){return{undo:rt.done.length,redo:rt.undone.length}},clearHistory:function(){rt=new U},setHistory:function(e){(rt=new U).done=e.done,rt.undone=e.undone},getHistory:function(){function e(e){for(var t,n=0,r=[];n<e.length;++n){r.push(t=[]);for(var i=0,o=e[n];i<o.length;++i){var l=[],a=o[i];t.push({start:a.start,added:a.added,old:l});for(var s=0;s<a.old.length;++s)l.push(N(a.old[s]))}}return r}return{done:e(rt.done),undone:e(rt.undone)}},matchBrackets:zn((function(){Tn(!0)})),getTokenAt:zn((function(e){return ft((e=Qt(e)).line).getTokenAt(Me,An(e.line),a.tabSize,e.ch)})),getStateAfter:function(e){return An((e=qt(null==e?Ne.size-1:e))+1)},cursorCoords:function(e,t){return null==e&&(e=Ve.inverted),this.charCoords(e?Ve.from:Ve.to,t)},charCoords:function(e,t){return e=Qt(e),"local"==t?dn(e,!1):"div"==t?dn(e,!0):function(e){var t=dn(e,!0),n=re(ie);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}(e)},coordsChar:function(e){var t=re(ie);return pn(e.x-t.left,e.y-t.top)},defaultTextHeight:function(){return gn()},markText:zn(un),setBookmark:function(e){e=Qt(e);var t=new sn("bookmark"),n=ft(e.line);rt.addChange(e.line,1,[W(n.text,n.markedSpans)],!0);var r={from:e.ch,to:e.ch,marker:t};return n.markedSpans=(n.markedSpans||[]).concat([r]),t.lines.push(n),t},findMarksAt:function(e){e=Qt(e);var t=[],n=ft(e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker)}return t},setMarker:zn((function(e,t,n){"number"==typeof e&&(e=ft(qt(e)));return e.gutterMarker={text:t,style:n},Ke=!0,e})),clearMarker:zn((function(e){"number"==typeof e&&(e=ft(qt(e)));e.gutterMarker=null,Ke=!0})),setLineClass:zn((function(e,t,n){return fn(e,(function(e){if(e.className!=t||e.bgClassName!=n)return e.className=t,e.bgClassName=n,!0}))})),hideLine:zn((function(e){return cn(e,!0)})),showLine:zn((function(e){return cn(e,!1)})),onDeleteLine:function(e,t){if("number"==typeof e){if(!at(e))return null;e=ft(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:function(e){if("number"==typeof e){if(!at(e))return null;var t=e;if(!(e=ft(e)))return null}else{if(null==(t=B(e)))return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className,bgClass:e.bgClassName}},getViewport:function(){return{from:Ze,to:_e}},addWidget:function(e,t,n,r,i){var o=(e=dn(Qt(e))).yBot,l=e.x;if(t.style.position="absolute",be.appendChild(t),"over"==r)o=e.y;else if("near"==r){var a=Math.max(Se.offsetHeight,Ne.height*gn()),s=Math.max(be.clientWidth,ie.clientWidth)-bn();e.yBot+t.offsetHeight>a&&e.y>t.offsetHeight&&(o=e.y-t.offsetHeight),l+t.offsetWidth>s&&(l=s-t.offsetWidth)}t.style.top=o+Cn()+"px",t.style.left=t.style.right="","right"==i?(l=be.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(be.clientWidth-t.offsetWidth)/2),t.style.left=l+bn()+"px"),n&&Ut(l,o,l+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return Ne.size},clipPos:Qt,getCursor:function(e){return null==e&&(e=Ve.inverted),{line:(t=e?Ve.from:Ve.to).line,ch:t.ch};var t},somethingSelected:function(){return!ae(Ve.from,Ve.to)},setCursor:zn((function(e,t,n){null==t&&"number"==typeof e.line?Jt(e.line,e.ch,n):Jt(e,t,n)})),setSelection:zn((function(e,t,n){(n?jt:Zt)(Qt(e),Qt(t||e))})),getLine:function(e){if(at(e))return ft(e).text},getLineHandle:function(e){if(at(e))return ft(e)},setLine:zn((function(e,t){at(e)&&Tt(t,{line:e,ch:0},{line:e,ch:ft(e).text.length})})),removeLine:zn((function(e){at(e)&&Tt("",{line:e,ch:0},Qt({line:e+1,ch:0}))})),replaceRange:zn(Tt),getRange:function(e,t,n){return Nt(Qt(e),Qt(t),n)},triggerOnKeyDown:zn(vt),execCommand:function(e){return s[e](ut)},moveH:zn((function(e,t){var n=e<0?Ve.from:Ve.to;(We||ae(Ve.from,Ve.to))&&(n=en(e,t));Jt(n.line,n.ch,!0)})),deleteH:zn((function(e,t){ae(Ve.from,Ve.to)?e<0?Tt("",en(e,t),Ve.to):Tt("",Ve.from,en(e,t)):Tt("",Ve.from,Ve.to);Re=!0})),moveV:zn((function(e,t){var n=dn(Ve.inverted?Ve.from:Ve.to,!0);null!=nt&&(n.x=nt);if("page"==t)var r=Math.min(Se.clientHeight,window.innerHeight||document.documentElement.clientHeight),i=pn(n.x,n.y+r*e);else if("line"==t){var o=gn();i=pn(n.x,n.y+.5*o+e*o)}"page"==t&&(H.scrollTop+=dn(i,!0).y-n.y);Jt(i.line,i.ch,!0),nt=n.x})),toggleOverwrite:function(){Ye?(Ye=!1,q.className=q.className.replace(" CodeMirror-overwrite","")):(Ye=!0,q.className+=" CodeMirror-overwrite")},posFromIndex:function(e){var t,n=0;return Ne.iter(0,Ne.size,(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n})),Qt({line:n,ch:t})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;return Ne.iter(0,e.line,(function(e){t+=e.text.length+1})),t},scrollTo:function(e,t){null!=e&&(Se.scrollLeft=e),null!=t&&(H.scrollTop=Se.scrollTop=t),Gt([])},getScrollInfo:function(){return{x:Se.scrollLeft,y:H.scrollTop,height:H.scrollHeight,width:Se.scrollWidth}},scrollIntoView:function(e){var t=dn(e?Qt(e):Ve.inverted?Ve.from:Ve.to);Ut(t.x,t.y,t.x,t.yBot)},setSize:function(e,t){function n(e){return e=String(e),/^\d+$/.test(e)?e+"px":e}null!=e&&(ke.style.width=n(e)),null!=t&&(Se.style.height=n(t)),ut.refresh()},operation:function(e){return zn(e)()},compoundChange:function(e){return Hn(e)},refresh:function(){Gt(!0,null,Ge),H.scrollHeight>Ge&&(H.scrollTop=Ge)},getInputField:function(){return T},getWrapperElement:function(){return ke},getScrollerElement:function(){return Se},getGutterElement:function(){return ge}};function ft(e){return function(e,t){for(;!e.lines;)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}(Ne,e)}function ct(e,t){Ke=!0;for(var n=t-e.height,r=e;r;r=r.parent)r.height+=n}function ht(e,t){return e.styles||e.highlight(Me,e.stateAfter=An(B(e)),a.tabSize),e.getContent(a.tabSize,t,a.lineWrapping)}function dt(e){var t={line:0,ch:0};Ct(t,{line:Ne.size-1,ch:ft(Ne.size-1).text.length},ve(e),t,t),Oe=!0}function pt(e,t){if("string"==typeof e&&!(e=s[e]))return!1;var n=We;try{a.readOnly&&($e=!0),t&&(We=null),e(ut)}catch(e){if(e!=Q)throw e;return!1}finally{We=n,$e=!1}return!0}function gt(e){var t=f(a.keyMap),r=t.auto;clearTimeout(st),r&&!h(e)&&(st=setTimeout((function(){f(a.keyMap)==t&&(a.keyMap=r.call?r.call(null,ut):r)}),50));var i=xe[Z(e,"keyCode")],o=!1,l=C&&n;if(null==i||e.altGraphKey)return!1;Z(e,"altKey")&&(i="Alt-"+i),Z(e,l?"metaKey":"ctrlKey")&&(i="Ctrl-"+i),Z(e,l?"ctrlKey":"metaKey")&&(i="Cmd-"+i);var s=!1;function u(){s=!0}return o=Z(e,"shiftKey")?c("Shift-"+i,a.extraKeys,a.keyMap,(function(e){return pt(e,!0)}),u)||c(i,a.extraKeys,a.keyMap,(function(e){if("string"==typeof e&&/^go[A-Z]/.test(e))return pt(e)}),u):c(i,a.extraKeys,a.keyMap,pt,u),s&&(o=!1),o&&(G(e),wn(),m&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),o}var mt=null;function vt(e){if(Te||yt(),p&&27==e.keyCode&&(e.returnValue=!1),tt&&It()&&(tt=!1),!a.onKeyEvent||!a.onKeyEvent(ut,V(e))){var t=Z(e,"keyCode");Xt(16==t||Z(e,"shiftKey"));var r=gt(e);C&&(mt=r?t:null,!r&&88==t&&Z(e,n?"metaKey":"ctrlKey")&&At(""))}}function yt(){"nocursor"!=a.readOnly&&(Te||(a.onFocus&&a.onFocus(ut),Te=!0,-1==Se.className.search(/\bCodeMirror-focused\b/)&&(Se.className+=" CodeMirror-focused")),Wt(),wn())}function xt(){Te&&(a.onBlur&&a.onBlur(ut),Te=!1,Fe&&zn((function(){Fe&&(Fe(),Fe=null)}))(),Se.className=Se.className.replace(" CodeMirror-focused","")),clearInterval(we),setTimeout((function(){Te||(We=null)}),150)}function Ct(e,t,n,r,i){if(!$e){var o=[];if(Ne.iter(e.line,t.line+1,(function(e){o.push(W(e.text,e.markedSpans))})),rt)for(rt.addChange(e.line,n.length,o);rt.done.length>a.undoDepth;)rt.done.shift();var l=function(e,t,n,r,i){if(!e&&!t)return i;var o=function(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t)||"bookmark"==l.type&&o.from==t&&o.from!=n){var a=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push({from:o.from,to:a?null:o.to,marker:l})}}return r}(e,n),l=function(e,t){if(e)for(var n,r=0;r<e.length;++r){var i=e[r],o=i.marker;if(null==i.to||(o.inclusiveRight?i.to>=t:i.to>t)||"bookmark"==o.type&&i.from==t){var l=null==i.from||(o.inclusiveLeft?i.from<=t:i.from<t);(n||(n=[])).push({from:l?null:i.from-t,to:null==i.to?null:i.to-t,marker:o})}}return n}(t,r),a=1==i.length,s=le(i).length+(a?n:0);if(o)for(var u=0;u<o.length;++u){if(null==(f=o[u]).to)(c=A(l,f.marker))?a&&(f.to=null==c.to?null:c.to+s):f.to=n}if(l)for(u=0;u<l.length;++u){var f,c;if(null!=(f=l[u]).to&&(f.to+=s),null==f.from)(c=A(o,f.marker))||(f.from=s,a&&(o||(o=[])).push(f));else f.from+=s,a&&(o||(o=[])).push(f)}var h=[W(i[0],o)];if(!a){var d,p=i.length-2;if(p>0&&o)for(u=0;u<o.length;++u)null==o[u].to&&(d||(d=[])).push({from:null,to:null,marker:o[u].marker});for(u=0;u<p;++u)h.push(W(i[u+1],d));h.push(W(le(i),l))}return h}(E(o[0]),E(le(o)),e.ch,t.ch,n);St(e,t,l,r,i)}}function bt(e,t){if(e.length){for(var n=e.pop(),r=[],i=n.length-1;i>=0;i-=1){var o=n[i],l=[],a=o.start+o.added;Ne.iter(o.start,a,(function(e){l.push(W(e.text,e.markedSpans))})),r.push({start:o.start,added:o.old.length,old:l});var s={line:o.start+o.old.length-1,ch:de(N(le(l)),N(le(o.old)))};St({line:o.start,ch:0},{line:a-1,ch:ft(a-1).text.length},o.old,s,s)}Oe=!0,t.push(r)}}function St(e,t,n,r,i){if(!$e){var o=!1,l=qe.text.length;a.lineWrapping||Ne.iter(e.line,t.line+1,(function(e){if(!e.hidden&&e.text.length==l)return o=!0,!0})),(e.line!=t.line||n.length>1)&&(Ke=!0);var s=t.line-e.line,u=ft(e.line),f=ft(t.line),c=le(n);if(0==e.ch&&0==t.ch&&""==N(c)){for(var h=[],d=0,p=n.length-1;d<p;++d)h.push(new O(N(n[d]),E(n[d])));f.update(f.text,E(c)),s&&Ne.remove(e.line,s,Ue),h.length&&Ne.insert(e.line,h)}else if(u==f)if(1==n.length)u.update(u.text.slice(0,e.ch)+N(n[0])+u.text.slice(t.ch),E(n[0]));else{for(h=[],d=1,p=n.length-1;d<p;++d)h.push(new O(N(n[d]),E(n[d])));h.push(new O(N(c)+u.text.slice(t.ch),E(c))),u.update(u.text.slice(0,e.ch)+N(n[0]),E(n[0])),Ne.insert(e.line+1,h)}else if(1==n.length)u.update(u.text.slice(0,e.ch)+N(n[0])+f.text.slice(t.ch),E(n[0])),Ne.remove(e.line+1,s,Ue);else{h=[];u.update(u.text.slice(0,e.ch)+N(n[0]),E(n[0])),f.update(N(c)+f.text.slice(t.ch),E(c));for(d=1,p=n.length-1;d<p;++d)h.push(new O(N(n[d]),E(n[d])));s>1&&Ne.remove(e.line+1,s-1,Ue),Ne.insert(e.line+1,h)}if(a.lineWrapping){var g=Math.max(5,Se.clientWidth/xn()-3);Ne.iter(e.line,e.line+n.length,(function(e){if(!e.hidden){var t=Math.ceil(e.text.length/g)||1;t!=e.height&&ct(e,t)}}))}else Ne.iter(e.line,e.line+n.length,(function(e){var t=e.text;!e.hidden&&t.length>l&&(qe=e,l=t.length,et=!0,o=!1)})),o&&(Qe=!0);Ee=Math.min(Ee,e.line),Nn(400);var m=n.length-s-1;if(Ie.push({from:e.line,to:t.line+1,diff:m}),a.onChange){for(d=0;d<n.length;++d)"string"!=typeof n[d]&&(n[d]=n[d].text);var v={from:e,to:t,text:n};if(Be){for(var y=Be;y.next;y=y.next);y.next=v}else Be=v}Zt(Qt(r),Qt(i),x(Ve.from.line),x(Ve.to.line))}function x(e){return e<=Math.min(t.line,t.line+m)?e:e+m}}function kt(){var e=Ne.height*gn()+2*Cn();return.99*e>Se.offsetHeight&&e}function wt(e){var t=kt();H.style.display=t?"block":"none",t?(z.style.height=be.style.minHeight=t+"px",H.style.height=Se.clientHeight+"px",null!=e&&(H.scrollTop=Se.scrollTop=e,y&&setTimeout((function(){H.scrollTop==e&&(H.scrollTop=e+(e?-1:1),H.scrollTop=e)}),0))):be.style.minHeight="",Ce.style.top=je*gn()+"px"}function Mt(){qe=ft(0),et=!0;var e=qe.text.length;Ne.iter(1,Ne.size,(function(t){var n=t.text;!t.hidden&&n.length>e&&(e=n.length,qe=t)})),Qe=!1}function Tt(e,t,n){function r(r){if(se(r,t))return r;if(!se(n,r))return i;var o=r.line+e.length-(n.line-t.line)-1,l=r.ch;return r.line==n.line&&(l+=le(e).length-(n.ch-(n.line==t.line?t.ch:0))),{line:o,ch:l}}var i;return t=Qt(t),n=n?Qt(n):t,Lt(e=ve(e),t,n,(function(e){return i=e,{from:r(Ve.from),to:r(Ve.to)}})),i}function At(e,t){Lt(ve(e),Ve.from,Ve.to,(function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:Ve.from,to:Ve.from}:{from:Ve.from,to:e}}))}function Lt(e,t,n,r){var i=1==e.length?e[0].length+t.ch:le(e).length,o=r({line:t.line+e.length-1,ch:i});Ct(t,n,e,o.from,o.to)}function Nt(e,t,n){var r=e.line,i=t.line;if(r==i)return ft(r).text.slice(e.ch,t.ch);var o=[ft(r).text.slice(e.ch)];return Ne.iter(r+1,i,(function(e){o.push(e.text)})),o.push(ft(i).text.slice(0,t.ch)),o.join(n||"\n")}function Et(e){return Nt(Ve.from,Ve.to,e)}function Wt(){tt||Ae.set(a.pollInterval,(function(){It(),Te&&Wt()}))}function Dt(){var e=!1;tt=!0,Ae.set(20,(function t(){It()||e?(tt=!1,Wt()):(e=!0,Ae.set(60,t))}))}var zt,Ht,Ot,Rt="";function It(){if(!Te||ye(T)||a.readOnly)return!1;var e=T.value;if(e==Rt)return!1;Dn||En(),We=null;for(var t=0,n=Math.min(Rt.length,e.length);t<n&&Rt[t]==e[t];)++t;return t<Rt.length?Ve.from={line:Ve.from.line,ch:Ve.from.ch-(Rt.length-t)}:Ye&&ae(Ve.from,Ve.to)&&!Xe&&(Ve.to={line:Ve.to.line,ch:Math.min(ft(Ve.to.line).text.length,Ve.to.ch+(e.length-t))}),At(e.slice(t),"end"),e.length>1e3?T.value=Rt="":Rt=e,Dn||Wn(),Xe=!1,!0}function Bt(e){var n;ae(Ve.from,Ve.to)?e&&(Rt=T.value=""):(Rt="",T.value=Et(),Te&&(n=T,t?(n.selectionStart=0,n.selectionEnd=n.value.length):n.select()))}function Pt(){"nocursor"!=a.readOnly&&T.focus()}function Kt(){var e=dn(Ve.inverted?Ve.from:Ve.to);return{x:a.lineWrapping?Math.min(e.x,ie.offsetWidth):e.x,y:e.y,yBot:e.yBot}}function Ut(e,t,n,r){var i=Ft(e,t,n,r);null!=i.scrollLeft&&(Se.scrollLeft=i.scrollLeft),null!=i.scrollTop&&(H.scrollTop=Se.scrollTop=i.scrollTop)}function Ft(e,t,n,r){var i=bn(),o=Cn();t+=o,r+=o,e+=i,n+=i;var l=Se.clientHeight,s=H.scrollTop,u={},f=kt()||1/0,c=t<o+10,h=r+o>f-10;t<s?u.scrollTop=c?0:Math.max(0,t):r>s+l&&(u.scrollTop=(h?f:r)-l);var d=Se.clientWidth,p=Se.scrollLeft,g=a.fixedGutter?ge.clientWidth:0,m=e<g+i+10;return e<p+g||m?(m&&(e=0),u.scrollLeft=Math.max(0,e-10-g)):n>d+p-3&&(u.scrollLeft=n+10-d),u}function Vt(e){var t=gn(),n=(null!=e?e:H.scrollTop)-Cn(),r=Math.max(0,Math.floor(n/t)),i=Math.ceil((n+Se.clientHeight)/t);return{from:P(Ne,r),to:P(Ne,i)}}function Gt(e,t,n){if(Se.clientWidth){var r=Vt(n);if(!0!==e&&0==e.length&&r.from>Ze&&r.to<_e)wt(n);else{var i=Math.max(r.from-100,0),o=Math.min(Ne.size,r.to+100);Ze<i&&i-Ze<20&&(i=Ze),_e>o&&_e-o<20&&(o=Math.min(Ne.size,_e));for(var l=!0===e?[]:function(e,t){for(var n=0,r=t.length||0;n<r;++n){for(var i=t[n],o=[],l=i.diff||0,a=0,s=e.length;a<s;++a){var u=e[a];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l,domStart:u.domStart}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from,domStart:u.domStart}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l,domStart:u.domStart+(i.to-u.from)}))}e=o}return e}([{from:Ze,to:_e,domStart:0}],e),s=0,u=0;u<l.length;++u){var f=l[u];f.from<i&&(f.domStart+=i-f.from,f.from=i),f.to>o&&(f.to=o),f.from>=f.to?l.splice(u--,1):s+=f.to-f.from}if(s!=o-i||i!=Ze||o!=_e){l.sort((function(e,t){return e.domStart-t.domStart}));var c=gn(),h=ge.style.display;F.style.display="none",function(e,t,n){function r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var i=0,o=F.firstChild,l=0;l<n.length;++l){for(var a=n[l];a.domStart>i;)o=r(o),i++;for(var s=0,u=a.to-a.from;s<u;++s)o=o.nextSibling,i++}for(;o;)o=r(o)}else fe(F);var f=n.shift();o=F.firstChild,s=e;Ne.iter(e,t,(function(e){if(f&&f.to==s&&(f=n.shift()),!f||f.from>s){if(e.hidden)var t=ue("pre");else{t=ht(e);if(e.className&&(t.className=e.className),e.bgClassName){var r=ue("pre"," ",e.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");t=ue("div",[r,t],null,"position: relative")}}F.insertBefore(t,o)}else o=o.nextSibling;++s}))}(i,o,l),F.style.display=ge.style.display="";var d=i!=Ze||o!=_e||Je!=Se.clientHeight+c;if(d&&(Je=Se.clientHeight+c),(i!=Ze||o!=_e&&a.onViewportChange)&&setTimeout((function(){a.onViewportChange&&a.onViewportChange(ut,i,o)})),Ze=i,_e=o,je=K(Ne,i),Nn(100),F.childNodes.length!=_e-Ze)throw new Error("BAD PATCH! "+JSON.stringify(l)+" size="+(_e-Ze)+" nodes="+F.childNodes.length);return a.lineWrapping&&p(),ge.style.display=h,(d||Ke)&&Yt()&&a.lineWrapping&&p()&&Yt(),wt(n),$t(),!t&&a.onUpdate&&a.onUpdate(ut),!0}wt(n)}}else Ze=_e=je=0;function p(){var e=F.firstChild,t=!1;return Ne.iter(Ze,_e,(function(n){if(e){if(!n.hidden){var r=Math.round(e.offsetHeight/c)||1;n.height!=r&&(ct(n,r),Ke=t=!0)}e=e.nextSibling}})),t}}function Yt(){if(a.gutter||a.lineNumbers){var e=Ce.offsetHeight,t=Se.clientHeight;ge.style.height=(e-t<2?t:e)+"px";var n,r=document.createDocumentFragment(),i=Ze;if(Ne.iter(Ze,Math.max(_e,Ze+1),(function(e){if(e.hidden)r.appendChild(ue("pre"));else{var t=e.gutterMarker,o=a.lineNumbers?a.lineNumberFormatter(i+a.firstLineNumber):null;t&&t.text?o=t.text.replace("%N%",null!=o?o:""):null==o&&(o=" ");var l=r.appendChild(ue("pre",null,t&&t.style));l.innerHTML=o;for(var s=1;s<e.height;++s)l.appendChild(ue("br")),l.appendChild(document.createTextNode(" "));t||(n=i)}++i})),ge.style.display="none",ce(he,r),null!=n&&a.lineNumbers){for(var o=he.childNodes[n-Ze],l=String(Ne.size).length,s=function(e){return e.textContent||e.innerText||e.nodeValue||""}(o.firstChild),u="";s.length+u.length<l;)u+=" ";u&&o.insertBefore(document.createTextNode(u),o.firstChild)}ge.style.display="";var f=Math.abs((parseInt(ie.style.marginLeft)||0)-ge.offsetWidth)>2;return ie.style.marginLeft=ge.offsetWidth+"px",Ke=!1,f}}function $t(){var e=ae(Ve.from,Ve.to),t=dn(Ve.from,!0),n=e?t:dn(Ve.to,!0),r=Ve.inverted?t:n,i=gn(),o=re(ke),l=re(F);if(D.style.top=Math.max(0,Math.min(Se.offsetHeight,r.y+l.top-o.top))+"px",D.style.left=Math.max(0,Math.min(Se.offsetWidth,r.x+l.left-o.left))+"px",e)q.style.top=r.y+"px",q.style.left=(a.lineWrapping?Math.min(r.x,ie.offsetWidth):r.x)+"px",q.style.display="",Y.style.display="none";else{var s=t.y==n.y,u=document.createDocumentFragment(),f=ie.clientWidth||ie.offsetWidth,c=ie.clientHeight||ie.offsetHeight,h=function(e,t,n,r){var i=v?"width: "+(n?f-n-e:f)+"px":"right: "+n+"px";u.appendChild(ue("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; "+i+"; height: "+r+"px"))};if(Ve.from.ch&&t.y>=0){var d=s?f-n.x:0;h(t.x,t.y,d,i)}var p=Math.max(0,t.y+(Ve.from.ch?i:0)),g=Math.min(n.y,c)-p;g>.2*i&&h(0,p,0,g),s&&Ve.from.ch||!(n.y<c-.5*i)||h(0,n.y,f-n.x,i),ce(Y,u),q.style.display="none",Y.style.display=""}}function Xt(e){We=e?We||(Ve.inverted?Ve.to:Ve.from):null}function jt(e,t){var n=We&&Qt(We);n&&(se(n,e)?e=n:se(t,n)&&(t=n)),Zt(e,t),Re=!0}function Zt(e,t,n,r){if(nt=null,null==n&&(n=Ve.from.line,r=Ve.to.line),!ae(Ve.from,e)||!ae(Ve.to,t)){if(se(t,e)){var i=t;t=e,e=i}if(e.line!=n){var o=_t(e,n,Ve.from.ch);o?e=o:cn(e.line,!1)}if(t.line!=r&&(t=_t(t,r,Ve.to.ch)),ae(e,t)||ae(e,Ve.to)?Ve.inverted=!1:ae(t,Ve.from)&&(Ve.inverted=!0),a.autoClearEmptyLines&&ae(Ve.from,Ve.to))if((Ve.inverted?e:t).line!=Ve.from.line&&Ve.from.line<Ne.size){var l=ft(Ve.from.line);/^\s+$/.test(l.text)&&setTimeout(zn((function(){if(l.parent&&/^\s+$/.test(l.text)){var e=B(l);Tt("",{line:e,ch:0},{line:e,ch:l.text.length})}})))}Ve.from=e,Ve.to=t,Pe=!0}}function _t(e,t,n){function r(t){for(var r=e.line+t,i=1==t?Ne.size:-1;r!=i;){var l=ft(r);if(!l.hidden){var a=e.ch;return(o||a>n||a>l.text.length)&&(a=l.text.length),{line:r,ch:a}}r+=t}}var i=ft(e.line),o=e.ch==i.text.length&&e.ch!=n;return i.hidden?e.line>=t?r(1)||r(-1):r(-1)||r(1):e}function Jt(e,t,n){var r=Qt({line:e,ch:t||0});(n?jt:Zt)(r,r)}function qt(e){return Math.max(0,Math.min(e,Ne.size-1))}function Qt(e){if(e.line<0)return{line:0,ch:0};if(e.line>=Ne.size)return{line:Ne.size-1,ch:ft(Ne.size-1).text.length};var t=e.ch,n=ft(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:t<0?{line:e.line,ch:0}:e}function en(e,t){var n=Ve.inverted?Ve.from:Ve.to,r=n.line,i=n.ch,o=ft(r);function l(t){if(i==(e<0?0:o.text.length)){if(t||!function(){for(var t=r+e,n=e<0?-1:Ne.size;t!=n;t+=e){var i=ft(t);if(!i.hidden)return r=t,o=i,!0}}())return!1;i=e<0?o.text.length:0}else i+=e;return!0}if("char"==t)l();else if("column"==t)l(!0);else if("word"==t)for(var a=!1;!(e<0)||l();){if(me(o.text.charAt(i)))a=!0;else if(a){e<0&&(e=1,l());break}if(e>0&&!l())break}return{line:r,ch:i}}function tn(e){var t=ft(e.line).text,n=e.ch,r=e.ch;if(t){!1===e.after||r==t.length?--n:++r;for(var i=t.charAt(n),o=me(i)?me:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&me(e)};n>0&&o(t.charAt(n-1));)--n;for(;r<t.length&&o(t.charAt(r));)++r}return{from:{line:e.line,ch:n},to:{line:e.line,ch:r}}}function nn(e,t){if(t||(t="add"),"smart"==t)if(Me.indent)var n=An(e);else t="prev";var r,i=ft(e),o=i.indentation(a.tabSize),l=i.text.match(/^\s*/)[0];"smart"==t&&(r=Me.indent(n,i.text.slice(l.length),i.text))==Q&&(t="prev"),"prev"==t?r=e?ft(e-1).indentation(a.tabSize):0:"add"==t?r=o+a.indentUnit:"subtract"==t&&(r=o-a.indentUnit);r=Math.max(0,r);var s="",u=0;if(a.indentWithTabs)for(var f=Math.floor(r/a.tabSize);f;--f)u+=a.tabSize,s+="\t";u<r&&(s+=oe(r-u)),s!=l&&Tt(s,{line:e,ch:0},{line:e,ch:l.length}),i.stateAfter=null}function rn(){Me=e.getMode(a,a.mode),Ne.iter(0,Ne.size,(function(e){e.stateAfter=null})),Ee=0,Nn(100)}function on(e,t){if(a.lineWrapping){ke.className+=" CodeMirror-wrap";var n=Se.clientWidth/xn()-3;Ne.iter(0,Ne.size,(function(e){if(!e.hidden){var t=Math.ceil(e.text.length/n)||1;1!=t&&ct(e,t)}})),ie.style.minWidth=te.style.left=""}else ke.className=ke.className.replace(" CodeMirror-wrap",""),Mt(),Ne.iter(0,Ne.size,(function(e){1==e.height||e.hidden||ct(e,1)}));Ie.push({from:0,to:Ne.size})}function ln(){Se.className=Se.className.replace(/\s*cm-s-\S+/g,"")+a.theme.replace(/(^|\s)\s*/g," cm-s-")}function an(){var e=u[a.keyMap].style;ke.className=ke.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function sn(e,t){this.lines=[],this.type=e,t&&(this.style=t)}function un(e,t,n,r){e=Qt(e),t=Qt(t);var i=new sn("range",n);if(r)for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);var l=e.line;return Ne.iter(l,t.line+1,(function(n){var r={from:l==e.line?e.ch:null,to:l==t.line?t.ch:null,marker:i};n.markedSpans=(n.markedSpans||[]).concat([r]),i.lines.push(n),++l})),Ie.push({from:e.line,to:t.line+1}),i}function fn(e,t){var n=e,r=e;return"number"==typeof e?r=ft(qt(e)):n=B(e),null==n?null:t(r,n)?(Ie.push({from:n,to:n+1}),r):null}function cn(e,t){return fn(e,(function(e,n){if(e.hidden!=t){e.hidden=t,a.lineWrapping||(t&&e.text.length==qe.text.length?Qe=!0:!t&&e.text.length>qe.text.length&&(qe=e,Qe=!1)),ct(e,t?0:1);var r=Ve.from.line,i=Ve.to.line;if(t&&(r==n||i==n)){var o=r==n?_t({line:r,ch:0},r,0):Ve.from,l=i==n?_t({line:i,ch:0},i,0):Ve.to;if(!l)return;Zt(o,l)}return Ke=!0}}))}function hn(e,t){if(0==t)return{top:0,left:0};var n=ht(e,t);ce(ne,n);var r=n.anchor,i=r.offsetTop,o=r.offsetLeft;if(p&&0==i&&0==o){var l=ue("span","x");r.parentNode.insertBefore(l,r.nextSibling),i=l.offsetTop}return{top:i,left:o}}function dn(e,t){var n,r=gn(),i=r*(K(Ne,e.line)-(t?je:0));if(0==e.ch)n=0;else{var o=hn(ft(e.line),e.ch);n=o.left,a.lineWrapping&&(i+=Math.max(0,o.top))}return{x:n,y:i,yBot:i+r}}function pn(e,t){var n=gn(),r=xn(),i=je+Math.floor(t/n);if(i<0)return{line:0,ch:0};var o=P(Ne,i);if(o>=Ne.size)return{line:Ne.size-1,ch:ft(Ne.size-1).text.length};var l=ft(o),s=l.text,u=a.lineWrapping,f=u?i-K(Ne,o):0;if(e<=0&&0==f)return{line:o,ch:0};var c=!1;function h(e){var t=hn(l,e);if(u){var r=Math.round(t.top/n);return c=r!=f,Math.max(0,t.left+(r-f)*Se.clientWidth)}return t.left}for(var d,p=0,g=0,m=s.length,v=Math.min(m,Math.ceil((e+f*Se.clientWidth*.9)/r));;){var y=h(v);if(!(y<=e&&v<m)){d=y,m=v;break}v=Math.min(m,Math.ceil(1.2*v))}if(e>d)return{line:o,ch:m};for((y=h(v=Math.floor(.8*m)))<e&&(p=v,g=y);;){if(m-p<=1){var x=e-g<d-e;return{line:o,ch:x?p:m,after:x}}var C=Math.ceil((p+m)/2),b=h(C);b>e?(m=C,d=b,c&&(d+=1e3)):(p=C,g=b)}}function gn(){if(null==Ot){Ot=ue("pre");for(var e=0;e<49;++e)Ot.appendChild(document.createTextNode("x")),Ot.appendChild(ue("br"));Ot.appendChild(document.createTextNode("x"))}var t=F.clientHeight;return t==Ht||(Ht=t,ce(ne,Ot.cloneNode(!0)),zt=ne.firstChild.offsetHeight/50||1,fe(ne)),zt}sn.prototype.clear=zn((function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=A(r.markedSpans,this);null!=i.from&&(e=B(r)),null!=i.to&&(t=B(r)),r.markedSpans=L(r.markedSpans,i)}null!=e&&Ie.push({from:e,to:t+1}),this.lines.length=0,this.explicitlyCleared=!0})),sn.prototype.find=function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=A(r.markedSpans,this);if(null!=i.from||null!=i.to){var o=B(r);null!=i.from&&(e={line:o,ch:i.from}),null!=i.to&&(t={line:o,ch:i.to})}}return"bookmark"==this.type?e:e&&{from:e,to:t}};var mn,vn,yn=0;function xn(){if(Se.clientWidth==yn)return mn;yn=Se.clientWidth;var e=ue("span","x"),t=ue("pre",[e]);return ce(ne,t),mn=e.offsetWidth||10}function Cn(){return ie.offsetTop}function bn(){return ie.offsetLeft}function Sn(e,t){var n,r,i=re(Se,!0);try{n=e.clientX,r=e.clientY}catch(e){return null}if(!t&&(n-i.left>Se.clientWidth||r-i.top>Se.clientHeight))return null;var o=re(ie,!0);return pn(n-o.left,r-o.top)}function kn(e){var t=Sn(e),n=H.scrollTop;if(t&&!C){(ae(Ve.from,Ve.to)||se(t,Ve.from)||!se(t,Ve.to))&&zn(Jt)(t.line,t.ch);var r=T.style.cssText;if(D.style.position="absolute",T.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Pt(),Bt(!0),ae(Ve.from,Ve.to)&&(T.value=Rt=" "),d){$(e);var i=_(window,"mouseup",(function(){i(),setTimeout(o,20)}),!0)}else setTimeout(o,50)}function o(){if(D.style.position="relative",T.style.cssText=r,m&&(H.scrollTop=n),Wt(),null!=T.selectionStart){clearTimeout(vn);var e=T.value=" "+(ae(Ve.from,Ve.to)?"":T.value),t=0;Rt=" ",T.selectionStart=1,T.selectionEnd=e.length,vn=setTimeout((function e(){" "==Rt&&0==T.selectionStart?zn(s.selectAll)(ut):t++<10?vn=setTimeout(e,500):Bt()}),200)}}}function wn(){clearInterval(we);var e=!0;q.style.visibility="",we=setInterval((function(){q.style.visibility=(e=!e)?"":"hidden"}),a.cursorBlinkRate)}var Mn={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function Tn(e){var t=Ve.inverted?Ve.from:Ve.to,n=ft(t.line),r=t.ch-1,i=r>=0&&Mn[n.text.charAt(r)]||Mn[n.text.charAt(++r)];if(i){i.charAt(0);for(var o=">"==i.charAt(1),l=o?1:-1,a=n.styles,s=r+1,u=0,f=a.length;u<f;u+=2)if((s-=a[u].length)<=0){var c=a[u+1];break}var h=[n.text.charAt(r)],d=/[(){}[\]]/;for(u=t.line,f=o?Math.min(u+100,Ne.size):Math.max(-1,u-100);u!=f;u+=l){n=ft(u);var p=u==t.line,g=x(n,p&&o?r+1:0,p&&!o?r:n.text.length);if(g)break}g||(g={pos:null,match:!1});c=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var m=un({line:t.line,ch:r},{line:t.line,ch:r+1},c),v=null!=g.pos&&un({line:u,ch:g.pos},{line:u,ch:g.pos+1},c),y=zn((function(){m.clear(),v&&v.clear()}));e?setTimeout(y,800):Fe=y}function x(e,t,n){if(e.text)for(var r,i=e.styles,a=o?0:e.text.length-1,s=o?0:i.length-2,u=o?i.length:-2;s!=u;s+=2*l){var f=i[s];if(i[s+1]==c){for(var p=o?0:f.length-1,g=o?f.length:-1;p!=g;p+=l,a+=l)if(a>=t&&a<n&&d.test(r=f.charAt(p))){var m=Mn[r];if(">"==m.charAt(1)==o)h.push(r);else{if(h.pop()!=m.charAt(0))return{pos:a,match:!1};if(!h.length)return{pos:a,match:!0}}}}else a+=l*f.length}}}function An(e){var t=function(e){for(var t,n,r=e,i=e-40;r>i;--r){if(0==r)return 0;var o=ft(r-1);if(o.stateAfter)return r;var l=o.indentation(a.tabSize);(null==n||t>l)&&(n=r-1,t=l)}return n}(e),n=t&&ft(t-1).stateAfter;return n=n?w(Me,n):M(Me),Ne.iter(t,e,(function(r){r.process(Me,n,a.tabSize),r.stateAfter=t==e-1||t%5==0?w(Me,n):null})),n}function Ln(){if(!(Ee>=_e)){var e=+new Date+a.workTime,t=w(Me,An(Ee)),n=Ee;Ne.iter(Ee,_e,(function(n){if(Ee>=Ze?(n.highlight(Me,t,a.tabSize),n.stateAfter=w(Me,t)):(n.process(Me,t,a.tabSize),n.stateAfter=Ee%5==0?w(Me,t):null),++Ee,+new Date>e)return Nn(a.workDelay),!0})),_e>n&&Ee>=Ze&&zn((function(){Ie.push({from:n,to:Ee})}))()}}function Nn(e){Ee<_e&&Le.set(e,Ln)}function En(){Oe=Re=Be=null,Ie=[],Pe=!1,Ue=[]}function Wn(){if(Qe&&Mt(),et&&!a.lineWrapping){var e=te.offsetWidth,t=hn(qe,qe.text.length).left;g||(te.style.left=t+"px",ie.style.minWidth=t+e+"px"),et=!1}var n,r;if(Pe){var i=Kt();n=Ft(i.x,i.y,i.x,i.yBot)}(Ie.length||n&&null!=n.scrollTop)&&(r=Gt(Ie,!0,n&&n.scrollTop)),r||(Pe&&$t(),Ke&&Yt()),n&&function(){var e=Kt();if(Ut(e.x,e.y,e.x,e.yBot),Te){var t=be.getBoundingClientRect(),n=null;if(e.y+t.top<0?n=!0:e.y+t.top+gn()>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n){var r="none"==q.style.display;r&&(q.style.display="",q.style.left=e.x+"px",q.style.top=e.y-je+"px"),q.scrollIntoView(n),r&&(q.style.display="none")}}}(),Pe&&wn(),Te&&(!0===Oe||!1!==Oe&&Pe)&&Bt(Re),Pe&&a.matchBrackets&&setTimeout(zn((function(){Fe&&(Fe(),Fe=null),ae(Ve.from,Ve.to)&&Tn(!1)})),20);var o=Pe,l=Ue;Be&&a.onChange&&ut&&a.onChange(ut,Be),o&&a.onCursorActivity&&a.onCursorActivity(ut);for(var s=0;s<l.length;++s)l[s](ut);r&&a.onUpdate&&a.onUpdate(ut)}var Dn=0;function zn(e){return function(){Dn++||En();try{var t=e.apply(this,arguments)}finally{--Dn||Wn()}return t}}function Hn(e){rt.startCompound();try{return e()}finally{rt.endCompound()}}for(var On in o)o.propertyIsEnumerable(On)&&!ut.propertyIsEnumerable(On)&&(ut[On]=o[On]);for(var Rn=0;Rn<l.length;++Rn)l[Rn](ut);return ut}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(e){return e}};var t=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n=t||/Mac/.test(navigator.platform),r=(/Win/.test(navigator.platform),e.modes={}),i=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var i=2;i<arguments.length;++i)n.dependencies.push(arguments[i])}r[t]=n},e.defineMIME=function(e,t){i[e]=t},e.resolveMode=function(t){if("string"==typeof t&&i.hasOwnProperty(t))t=i[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){n=e.resolveMode(n);var i=r[n.name];if(!i)return e.getMode(t,"text/plain");var o=i(t,n);if(a.hasOwnProperty(n.name)){var l=a[n.name];for(var s in l)l.hasOwnProperty(s)&&(o[s]=l[s])}return o.name=n.name,o},e.listModes=function(){var e=[];for(var t in r)r.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in i)i.propertyIsEnumerable(t)&&e.push({mime:t,mode:i[t]});return e};var o=e.extensions={};e.defineExtension=function(e,t){o[e]=t};var l=[];e.defineInitHook=function(e){l.push(e)};var a=e.modeExtensions={};e.extendMode=function(e,t){var n=a.hasOwnProperty(e)?a[e]:a[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])};var s=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!ae(t,n);r||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,r?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t","end")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("\t","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},u=e.keyMap={};function f(e){return"string"==typeof e?u[e]:e}function c(e,t,n,r,i){function o(t){var n=(t=f(t))[e];if(!1===n)return i&&i(),!0;if(null!=n&&r(n))return!0;if(t.nofallthrough)return i&&i(),!0;var l=t.fallthrough;if(null==l)return!1;if("[object Array]"!=Object.prototype.toString.call(l))return o(l);for(var a=0,s=l.length;a<s;++a)if(o(l[a]))return!0;return!1}return!(!t||!o(t))||o(n)}function h(e){var t=xe[Z(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}u.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},u.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},u.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},u.default=n?u.macDefault:u.pcDefault,u.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=h,e.fromTextArea=function(t,n){if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),null==n.autofocus){var r=document.body;try{r=document.activeElement}catch(e){}n.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}function i(){t.value=a.getValue()}if(t.form){var o=_(t.form,"submit",i,!0),l=t.form.submit;t.form.submit=function e(){i(),t.form.submit=l,t.form.submit(),t.form.submit=e}}t.style.display="none";var a=e((function(e){t.parentNode.insertBefore(e,t.nextSibling)}),n);return a.save=i,a.getTextArea=function(){return t},a.toTextArea=function(){i(),t.parentNode.removeChild(a.getWrapperElement()),t.style.display="",t.form&&(o(),"function"==typeof t.form.submit&&(t.form.submit=l))},a};var d=/gecko\/\d{7}/i.test(navigator.userAgent),p=/MSIE \d/.test(navigator.userAgent),g=/MSIE [1-7]\b/.test(navigator.userAgent),m=/MSIE [1-8]\b/.test(navigator.userAgent),v=p&&5==document.documentMode,y=/WebKit\//.test(navigator.userAgent),x=/Chrome\//.test(navigator.userAgent),C=/Opera\//.test(navigator.userAgent),b=/Apple Computer/.test(navigator.vendor),S=/KHTML\//.test(navigator.userAgent),k=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);function w(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function M(e,t,n){return!e.startState||e.startState(t,n)}function T(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function A(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function L(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function N(e){return"string"==typeof e?e:e.text}function E(e){if("string"==typeof e)return null;for(var t=e.markedSpans,n=null,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?n||(n=t.slice(0,r)):n&&n.push(t[r]);return n?n.length?n:null:t}function W(e,t){return t?{text:e,markedSpans:t}:e}function D(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=pe(r,e);r.splice(i,1)}e.markedSpans=null}}function z(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.lines.push(e);e.markedSpans=t}}e.copyState=w,e.startState=M,e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}},T.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return ne(this.string,this.start,this.tabSize)},indentation:function(){return ne(this.string,null,this.tabSize)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string).indexOf(i(e),this.pos)==this.pos)return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=T;var H=" ";function O(e,t){this.text=e,this.height=1,z(this,t)}function R(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function I(e){this.children=e;for(var t=0,n=0,r=0,i=e.length;r<i;++r){var o=e[r];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function B(e){if(null==e.parent)return null;for(var t=e.parent,n=pe(t.lines,e),r=t.parent;r;t=r,r=r.parent){var i=0;for(r.children.length;r.children[i]!=t;++i)n+=r.children[i].chunkSize()}return n}function P(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var o=e.children[r],l=o.height;if(t<l){e=o;continue e}t-=l,n+=o.chunkSize()}return n}while(!e.lines);for(r=0,i=e.lines.length;r<i;++r){var a=e.lines[r].height;if(t<a)break;t-=a}return n+r}function K(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var o=e.children[r],l=o.chunkSize();if(t<l){e=o;continue e}t-=l,n+=o.height}return n}while(!e.lines);for(r=0;r<t;++r)n+=e.lines[r].height;return n}function U(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function F(){$(this)}function V(e){return e.stop||(e.stop=F),e}function G(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Y(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function $(e){G(e),Y(e)}function X(e){return e.target||e.srcElement}function j(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),n&&e.ctrlKey&&1==t&&(t=3),t}function Z(e,t){return e.override&&e.override.hasOwnProperty(t)?e.override[t]:e[t]}function _(e,t,n,r){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),r)return function(){e.removeEventListener(t,n,!1)}}else{var i=function(e){n(e||window.event)};if(e.attachEvent("on"+t,i),r)return function(){e.detachEvent("on"+t,i)}}}function J(){this.id=null}d||p&&!g?H="​":C&&(H=""),O.prototype={update:function(e,t){this.text=e,this.stateAfter=this.styles=null,D(this),z(this,t)},highlight:function(e,t,n){var r=new T(this.text,n),i=this.styles||(this.styles=[]),o=i.length=0;for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var l=e.token(r,t),a=r.current();if(r.start=r.pos,o&&i[o-1]==l?i[o-2]+=a:a&&(i[o++]=a,i[o++]=l),r.pos>5e3){i[o++]=this.text.slice(r.pos),i[o++]=null;break}}},process:function(e,t,n){var r=new T(this.text,n);for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol()&&r.pos<=5e3;)e.token(r,t),r.start=r.pos},getTokenAt:function(e,t,n,r){for(var i=new T(this.text,n);i.pos<r&&!i.eol();){i.start=i.pos;var o=e.token(i,t)}return{start:i.start,end:i.pos,string:i.current(),className:o||null,state:t}},indentation:function(e){return ne(this.text,null,e)},getContent:function(e,t,n){var r=!0,i=0,o=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,l=ue("pre");function a(t,n,l){if(n){if(r&&p&&" "==n.charAt(0)&&(n=" "+n.slice(1)),r=!1,o.test(n)){h=document.createDocumentFragment();for(var a=0;;){o.lastIndex=a;var s=o.exec(n),u=s?s.index-a:n.length-a;if(u&&(h.appendChild(document.createTextNode(n.slice(a,a+u))),i+=u),!s)break;if(a+=u+1,"\t"==s[0]){var f=e-i%e;h.appendChild(ue("span",oe(f),"cm-tab")),i+=f}else{var c=ue("span","•","cm-invalidchar");c.title="\\u"+s[0].charCodeAt(0).toString(16),h.appendChild(c),i+=1}}}else{i+=n.length;var h=document.createTextNode(n)}l?t.appendChild(ue("span",[h],l)):t.appendChild(h)}}var s=a;if(null!=t){var u=0,f=l.anchor=ue("span");s=function(e,r,i){var o=r.length;if(t>=u&&t<u+o){var l=t-u;if(l&&(a(e,r.slice(0,l),i),n)){var c=r.slice(l-1,l+1);te.test(c)?e.appendChild(ue("wbr")):!g&&/\w\w/.test(c)&&e.appendChild(document.createTextNode("‍"))}e.appendChild(f),a(f,C?r.slice(l,l+1):r.slice(l),i),C&&a(e,r.slice(l+1),i),t--,u+=o}else u+=o,a(e,r,i),u==t&&u==m?(he(f,H),e.appendChild(f)):u>t+10&&/\s/.test(r)&&(s=function(){})}}var c=this.styles,h=this.text,d=this.markedSpans,m=h.length;function v(e){return e?"cm-"+e.replace(/ +/g," cm-"):null}if(h||null!=t)if(d&&d.length){d.sort((function(e,t){return e.from-t.from}));for(var y=0,x=(E=0,""),b=d[0].from||0,S=[],k=0,w=function(){for(var e;k<d.length&&((e=d[k]).from==y||null==e.from);)"range"==e.marker.type&&S.push(e),++k;b=k<d.length?d[k].from:1/0;for(var t=0;t<S.length;++t){var n=S[t].to;null==n&&(n=1/0),n==y?S.splice(t--,1):b=Math.min(n,b)}};y<m;){b==y&&w();for(var M=Math.min(m,b);;){if(x){for(var T=y+x.length,A=z,L=0;L<S.length;++L){var N=S[L];A=(A?A+" ":"")+N.marker.style,N.marker.endStyle&&N.to===Math.min(T,M)&&(A+=" "+N.marker.endStyle),N.marker.startStyle&&N.from===y&&(A+=" "+N.marker.startStyle)}if(s(l,T>M?x.slice(0,M-y):x,A),T>=M){x=x.slice(M-y),y=M;break}y=T}x=c[E++],z=v(c[E++])}}}else for(var E=0,W=0;W<m;E+=2){var D=c[E],z=c[E+1],O=D.length;W+O>m&&(D=D.slice(0,m-W)),W+=O,s(l,D,v(z))}else s(l," ");return l},cleanUp:function(){this.parent=null,D(this)}},R.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var o=this.lines[r];if(this.height-=o.height,o.cleanUp(),o.handlers)for(var l=0;l<o.handlers.length;++l)n.push(o.handlers[l])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},I.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e),a=i.height;if(i.remove(e,l,n),this.height-=a-i.height,o==l&&(this.children.splice(r--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(this.size-t<25){var s=[];this.collapse(s),this.children=[new R(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var o=this.children[r],l=o.chunkSize();if(e<=l){if(o.insertHeight(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=new R(o.lines.splice(o.lines.length-25,25));o.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new I(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=pe(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new I(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var o=this.children[r],l=o.chunkSize();if(e<l){var a=Math.min(t,l-e);if(o.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=l}}},U.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+new Date,i=le(this.done),o=i&&le(i),l=r-this.time;if(i&&!this.closed&&this.compound)i.push({start:e,added:t,old:n});else if(l>400||!o||this.closed||o.start>e+n.length||o.start+o.added<e)this.done.push([{start:e,added:t,old:n}]),this.closed=!1;else{for(var a=Math.max(0,o.start-e),s=Math.max(0,e+n.length-(o.start+o.added)),u=a;u>0;--u)o.old.unshift(n[u-1]);for(u=s;u>0;--u)o.old.push(n[n.length-u]);a&&(o.start=e),o.added+=t-(n.length-a-s)}this.time=r},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},e.e_stop=$,e.e_preventDefault=G,e.e_stopPropagation=Y,e.connect=_,J.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var q,Q=e.Pass={toString:function(){return"CodeMirror.Pass"}},ee=function(){if(m)return!1;var e=ue("div");return"draggable"in e||"dragDrop"in e}(),te=((q=ue("textarea")).value="foo\nbar",q.value.indexOf("\r"),/^$/);function ne(e,t,n){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var r=0,i=0;r<t;++r)"\t"==e.charAt(r)?i+=n-i%n:++i;return i}function re(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(e){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n}d?te=/$'/:b?te=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:x&&(te=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var ie=[""];function oe(e){for(;ie.length<=e;)ie.push(le(ie)+" ");return ie[e]}function le(e){return e[e.length-1]}function ae(e,t){return e.line==t.line&&e.ch==t.ch}function se(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function ue(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)he(i,t);else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function fe(e){return e.innerHTML="",e}function ce(e,t){fe(e).appendChild(t)}function he(e,t){m?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function de(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0&&e.charAt(n)==t.charAt(r);--n,--r);return r+1}function pe(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}var ge=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function me(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ge.test(e))}var ve=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(n.push(o.slice(0,l)),t+=l+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=ve;var ye=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)};e.defineMode("null",(function(){return{token:function(e){e.skipToEnd()}}})),e.defineMIME("text/plain","null");var xe={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=xe,function(){for(var e=0;e<10;e++)xe[e+48]=String(e);for(e=65;e<=90;e++)xe[e]=String.fromCharCode(e);for(e=1;e<=12;e++)xe[e+111]=xe[e+63235]="F"+e}(),e.version="2.36",e}();